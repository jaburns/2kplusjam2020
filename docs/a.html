<canvas id=a></canvas><h1 id=s></h1><style onload="g=a.getContext('webgl');for(i in g)g[i[0]+i[7]+[i[13]]]=g[i];k=g.cr(),q='attribute vec4 a;void main(){gl_Position=a;}',r=g.ch(35633),g.so(r,q),g.cS(r),g.ah(k,r),q='precision highp float;uniform mat4 g;float v;vec2 f;vec3 m;float t(vec2 v){return fract(sin(dot(v,vec2(12.9898,78.233)))*43758.5);}vec2 d(float v){return v=(v+1.)/2.,vec2(floor(v*255.)/255.,fract(255.*v));}float r(vec2 v){return(v.x/255.+v.y/255./255.)*2.-1.;}int i;vec3 d(vec2 f,vec3 m){if(i>0&&f.x>69.3&&f.x<70.)return f=floor(10.*f),vec3(.2+.8*mod(f.x+f.y,2.));vec3 r=i>0?vec3(0,0,.5)*smoothstep(0.,.1,cos(.1*f.x+v)):vec3(0);f+=.8*sin(.9*f.yx);vec3 x=m*(1.-.05*abs(floor(mod(8.*(f.x+2.-f.y),4.))-2.));return x+r;}vec3 d(vec2 v,float f,vec3 x){f=clamp(f,0.,1.);float y=1.-f,r=1.-sqrt(1.-y*y);return d(v+.2*vec2(-r,r),x)*(1.-.5*pow(clamp(f+.5,.5,1.),2.));}float r(float v,float f){return-length(min(vec2(v,f),0.))+max(min(v,f),0.);}float n(vec2 f){float x=t(vec2(v+1.,floor(f.x+.5))),y=t(vec2(v+1.,floor(f.x+1.5))),m=t(vec2(v+1.,floor(f.x-.5))),i=t(vec2(v+1.,floor(f.x+.5+9.))),w=t(vec2(v+1.,floor(f.x+1.5+9.))),d=t(vec2(v+1.,floor(f.x-.5+9.)));if(f.y+i>0.)return-1.;vec2 n=f;n.x=mod(n.x+.5,1.)-.5;float e=length(n+vec2(0,i))-(.7+.5*x),c=length(n+vec2(-1,w))-(.7+.5*y),h=length(n+vec2(1,d))-(.7+.5*m);return min(f.x-.7*f.y-7.,r(r(e,h),c));}vec3 n(vec2 v,vec3 f){float x=n(v);return x<-.045?vec3(0):x<0.?vec3(0):d(v,3.*x,f);}bool d(){float v=n(f);vec2 r=vec2(.0001,0),d=normalize(vec2(n(f-r.xy)-n(f+r.xy),n(f-r.yx)-n(f+r.yx)));m=vec3(d,v);return v>=-.045;}vec2 d(vec2 v,vec2 f,float x,float y){vec2 r=vec2(f.y,-f.x);float m=dot(v,f),d=dot(v,r);return m*f*y+d*r*x;}void t(vec2 v,inout vec3 f){float m=max(1.-pow(20.*(v.x-20.),2.),0.);if(m>0.)f=vec3(.01+floor(mod(20.*(v.x+v.y),2.)));}vec3 h(vec2 v){vec2 r=(v-g[0].xy*.5)/g[0].y;r.x+=g[0].w;r*=3.5;r.y-=.9;vec3 m;if(length(r-f)<.05){r-=f;m=1.-vec3(.13,.76,.37);float x=max(8.*length(r-vec2(.04))+.9,0.);m*=1./x/x;}else{i=1;m=n(r,vec3(.13,.76,.37));i=0;if(m==vec3(0)){m=n(2.*r-3.*vec2(g[0].w-99.,-.1),vec3(.65,.31,.11));if(m==vec3(0)){m=n(4.*r-8.*vec2(g[0].w-99.,0),vec3(.65,.31,.11));if(m==vec3(0))m=vec3(.47,.71,1.);else m=mix(m,vec3(.47,.71,1.),.6);}else m=mix(m,vec3(.47,.71,1.),.3);}}return m;}void main(){vec2 x=gl_FragCoord.xy;f=vec2(r(g[1].xy),r(g[1].zw));f.x+=g[3].x;f*=3.5;vec2 y=vec2(r(g[2].xy),r(g[2].zw));bool i=mod(g[0].z,2.)>.9,w=mod(g[0].z/2.,2.)>.9,c=mod(g[0].z/4.,2.)>.9,n=mod(g[0].z/8.,2.)>.9;v=floor(g[0].z/16.);bool e=mod(g[3].z,2.)>.9,l=mod(g[3].z/2.,2.)>.9;int t=int(g[3].w);vec3 s=h(x+.5*vec2(-.75,.25)),z=h(x+.5*vec2(-.25,-.75)),o=h(x+.5*vec2(.25,.75)),a=h(x+.5*vec2(.75,-.25));gl_FragColor=vec4(.25*(s+z+o+a),1);if(x.y<1.&&x.x<4.){y.y-=.01;f+=.05*y;if(d()){t=0;if(dot(m.xy,y)<0.)f+=m.xy*(m.z+.045),y=d(y,m.xy,1.,0.);}else{t++;if(t==8)e=false,l=false;if(!e&&n)e=true,l=true,y.y=-1.;if(!l&&w)l=true,y.x+=.5-.5*y.x;}gl_FragColor=vec4(0,0,((e?1.:0.)+(l?2.:0.))/255.,float(t)/255.);if(x.x<2.)f/=3.5,f.x-=g[0].w,gl_FragColor=vec4(d(f.x),d(f.y));else if(x.x<3.)gl_FragColor=vec4(d(y.x),d(y.y));}}',r=g.ch(35632),g.so(r,q),g.cS(r),g.ah(k,r),console.log(g.geL(r)),g.lg(k),g.vto(g.lg(k),2,5120,g.eet(g.ur(k)),g.bf(q=34962,g.cu()),g.ba(q,Uint8Array.of(28,28,28,128,128,28),q+82)),n=0,o=r=>(b=[128,1,128,1,128,1,128,1,255,1,192,1,128,1,128,0],e=new Uint8Array(16),m=$=l=d=f=0,n=r?n:prompt(s.innerText+'\nMap?(0-999)',n)|0,c=1),o(),p={},document.onkeydown=q=>p[q.keyCode]=1,document.onkeyup=q=>p[q.keyCode]=0,h=r=>(r|=0,r>9?r:'0'+r),setInterval(r=>(g.re(g.da(4,g.uM4(g.goa(k,'g'),g.vt(0,0,b[0],b[1]),b),3),0,4,1,6408,5121,e),b=Array.from(e),b[0]=a.width=innerWidth,b[1]=a.height=innerHeight,b[2]=p[37]|0+2*p[39]|0+4*p[38]|0+8*p[40]|0+16*n,b[12]=d,i=(b[8]/255+b[9]/255/255)*2-1,$+=i*.05/3.5+c,c=0,f+=(.3*i-f)/99,d=f+$,b[3]=d,b[15]==0?m++:m=0,m>180&&o(1),$>20&&o(),l++,s.innerText=`${h(l/3600)}:${h(l/60%60)}:${h(l/.6%100)}`),16)">html,body,canvas{font-family:monospace;margin:0}h1{color:#137;position:absolute;left:45%;top:0