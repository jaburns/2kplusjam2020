<canvas id=a></canvas><h1 id=s></h1><style onload="g=a.getContext('webgl');for(i in g)g[i[0]+i[7]+[i[13]]]=g[i];k=g.cr(),p='attribute vec4 a;void main(){gl_Position=a;}',q=g.ch(35633),g.so(q,p),g.cS(q),g.ah(k,q),p='precision highp float;uniform mat4 g;float v;vec2 f(float v){return v=(v+1.)/2.,vec2(floor(v*255.)/255.,fract(255.*v));}float d(vec2 v){return(v.x/255.+v.y/255./255.)*2.-1.;}vec3 d(vec2 v,vec3 f){return v+=.8*sin(.9*v.yx),f*(1.-.05*abs(floor(mod(8.*(v.x+2.-v.y),4.))-2.));}vec3 d(vec2 v,float f,vec3 y){f=clamp(f,0.,1.);float x=1.-f,w=1.-sqrt(1.-x*x);return d(v+.2*vec2(-w,w),y)*(1.-.5*pow(clamp(f+.5,.5,1.),2.));}float m(vec2 v){return fract(sin(dot(v,vec2(12.9898,78.233)))*43758.5);}float f(float v,float f){return-length(min(vec2(v,f),0.))+max(min(v,f),0.);}float t(vec2 y){float x=m(vec2(v+1.,floor(y.x+.5))),w=m(vec2(v+1.,floor(y.x+1.5))),r=m(vec2(v+1.,floor(y.x-.5))),d=m(vec2(v+1.,floor(y.x+.5+9.))),t=m(vec2(v+1.,floor(y.x+1.5+9.))),o=m(vec2(v+1.,floor(y.x-.5+9.)));if(y.y+d>0.)return-1.;vec2 i=y;i.x=mod(i.x+.5,1.)-.5;float e=length(i+vec2(0,d))-(.7+.5*x),b=length(i+vec2(-1,t))-(.7+.5*w),c=length(i+vec2(1,o))-(.7+.5*r);return min(y.x-.7*y.y-7.,f(f(e,c),b));}vec3 f(vec2 v,float f,vec3 y){float x=t(v);return x<-.045?vec3(0):x<0.?vec3(0):d(v,3.*x,y);}bool m(vec2 v,float f,out vec3 i){float y=t(v);vec2 x=vec2(.0001,0),w=normalize(vec2(t(v-x.xy)-t(v+x.xy),t(v-x.yx)-t(v+x.yx)));i=vec3(w,y);return y>=-.045;}vec2 d(vec2 v,vec2 y,float f,float x){vec2 w=vec2(y.y,-y.x);float i=dot(v,y),d=dot(v,w);return i*y*x+d*w*f;}void m(vec2 v,inout vec3 y){float f=max(1.-pow(20.*(v.x-20.),2.),0.);if(f>0.)y=vec3(.01+floor(mod(20.*(v.x+v.y),2.)));}vec3 t(vec2 v,vec2 y,bool x){vec2 i=(v-g[0].xy*.5)/g[0].y;i.x+=g[0].w;i*=3.5;i.y-=.9;vec3 w;if(length(i-y)<.05){i-=y;w=x?vec3(1,0,0):1.-vec3(.13,.76,.37);float z=max(8.*length(i-vec2(.04))+.9,0.);w*=1./z/z;}else{w=f(i,g[0].w,vec3(.13,.76,.37));if(w==vec3(0)){w=f(2.*i-3.*vec2(g[0].w-99.,-.1),g[0].w,vec3(.65,.31,.11));m(i/3.5,w);if(w==vec3(0)){w=f(4.*i-8.*vec2(g[0].w-99.,0),g[0].w,vec3(.65,.31,.11));if(w==vec3(0))w=vec3(.47,.71,1.);else w=mix(w,vec3(.47,.71,1.),.6);}else w=mix(w,vec3(.47,.71,1.),.3);}}return w;}void main(){vec2 y=gl_FragCoord.xy,i=vec2(d(g[1].xy),d(g[1].zw));i.x+=g[3].x;i*=3.5;vec2 w=vec2(d(g[2].xy),d(g[2].zw));vec3 x;bool r=mod(g[0].z,2.)>.9,o=mod(g[0].z/2.,2.)>.9,b=mod(g[0].z/4.,2.)>.9,c=mod(g[0].z/8.,2.)>.9;v=floor(g[0].z/16.);bool e=mod(g[3].z,2.)>.9,l=mod(g[3].z/2.,2.)>.9,z=mod(g[3].z/4.,2.)>.9;float s=g[3].w;vec3 a=t(y+.5*vec2(-.75,.25),i,e),n=t(y+.5*vec2(-.25,-.75),i,e),u=t(y+.5*vec2(.25,.75),i,e),h=t(y+.5*vec2(.75,-.25),i,e);gl_FragColor=vec4(.25*(a+n+u+h),1);if(y.y<1.&&y.x<4.){w.y-=.01;i+=.05*w;if(m(i,g[0].w,x)){if(!z);z=true;if(dot(x.xy,w)<0.)i+=x.xy*(x.z+.045),w=d(w,x.xy,1.,0.);}else if(z){s++;if(s>5.)z=false,e=false,l=false,s=0.;}if(!e&&c)e=true,l=true,w.y=-1.;if(!l&&o)l=true,w.x+=.5-.5*w.x;gl_FragColor=vec4(0,0,((e?1.:0.)+(l?2.:0.)+(z?4.:0.))/255.,s/255.);if(y.x<2.)i/=3.5,i.x-=g[0].w,gl_FragColor=vec4(f(i.x),f(i.y));else if(y.x<3.)gl_FragColor=vec4(f(w.x),f(w.y));}}',q=g.ch(35632),g.so(q,p),g.cS(q),g.ah(k,q),console.log(g.geL(q)),g.lg(k),g.vto(g.lg(k),2,5120,g.eet(g.ur(k)),g.bf(p=34962,g.cu()),g.ba(p,Uint8Array.of(28,28,28,128,128,28),p+82)),m=0,n=()=>(b=[128,1,128,1,128,1,128,1,255,1,192,1,128,1,128,1],e=new Uint8Array(16),$=l=d=f=0,m=prompt(s.innerText+'\nMap?(0-999)',m)|0,c=1),n(),o={},document.onkeydown=p=>o[p.keyCode]=1,document.onkeyup=p=>o[p.keyCode]=0,h=q=>(q|=0,q>9?q:'0'+q),setInterval(q=>(g.re(g.da(4,g.uM4(g.goa(k,'g'),g.vt(0,0,b[0],b[1]),b),3),0,4,1,6408,5121,e),b=Array.from(e),b[0]=a.width=innerWidth,b[1]=a.height=innerHeight,b[2]=o[37]|0+2*o[39]|0+4*o[38]|0+8*o[40]|0+16*m,b[12]=d,i=(b[8]/255+b[9]/255/255)*2-1,$+=i*.05/3.5+c,c=0,f+=(.3*i-f)/99,d=f+$,b[3]=d,b[13]=l++,$>20&&n(),s.innerText=`${h(l/3600)}:${h(l/60%60)}:${h(l/.6%100)}`),16)">html,body,canvas{font-family:monospace;margin:0}h1{color:#137;position:absolute;left:45%;top:0