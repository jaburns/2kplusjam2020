<canvas id=a></canvas><h1 id=s></h1><style onload="g=a.getContext('webgl');for(i in g)g[i[0]+i[7]+[i[13]]]=g[i];k=g.cr(),p='attribute vec4 a;void main(){gl_Position=a;}',q=g.ch(35633),g.so(q,p),g.cS(q),g.ah(k,q),p='precision highp float;uniform mat4 g;float v;float f(vec2 v){return fract(sin(dot(v,vec2(12.9898,78.233)))*43758.5);}vec2 d(float v){return v=(v+1.)/2.,vec2(floor(v*255.)/255.,fract(255.*v));}float r(vec2 v){return(v.x/255.+v.y/255./255.)*2.-1.;}int m;vec3 d(vec2 x,vec3 f){if(m>0&&x.x>69.3&&x.x<70.)return x=floor(10.*x),vec3(.2+.8*mod(x.x+x.y,2.));vec3 r=m>0?vec3(0,0,.5)*smoothstep(0.,.1,cos(.1*x.x+v)):vec3(0);x+=.8*sin(.9*x.yx);vec3 y=f*(1.-.05*abs(floor(mod(8.*(x.x+2.-x.y),4.))-2.));return y+r;}vec3 d(vec2 v,float x,vec3 f){x=clamp(x,0.,1.);float y=1.-x,w=1.-sqrt(1.-y*y);return d(v+.2*vec2(-w,w),f)*(1.-.5*pow(clamp(x+.5,.5,1.),2.));}float f(float v,float f){return-length(min(vec2(v,f),0.))+max(min(v,f),0.);}float t(vec2 x){float y=f(vec2(v+1.,floor(x.x+.5))),r=f(vec2(v+1.,floor(x.x+1.5))),w=f(vec2(v+1.,floor(x.x-.5))),m=f(vec2(v+1.,floor(x.x+.5+9.))),d=f(vec2(v+1.,floor(x.x+1.5+9.))),t=f(vec2(v+1.,floor(x.x-.5+9.)));if(x.y+m>0.)return-1.;vec2 i=x;i.x=mod(i.x+.5,1.)-.5;float e=length(i+vec2(0,m))-(.7+.5*y),o=length(i+vec2(-1,d))-(.7+.5*r),c=length(i+vec2(1,t))-(.7+.5*w);return min(x.x-.7*x.y-7.,f(f(e,c),o));}vec3 f(vec2 v,float y,vec3 f){float x=t(v);return x<-.045?vec3(0):x<0.?vec3(0):d(v,3.*x,f);}bool r(vec2 v,float x,out vec3 f){float y=t(v);vec2 r=vec2(.0001,0),w=normalize(vec2(t(v-r.xy)-t(v+r.xy),t(v-r.yx)-t(v+r.yx)));f=vec3(w,y);return y>=-.045;}vec2 d(vec2 v,vec2 x,float y,float f){vec2 r=vec2(x.y,-x.x);float m=dot(v,x),w=dot(v,r);return m*x*f+w*r*y;}void r(vec2 v,inout vec3 y){float x=max(1.-pow(20.*(v.x-20.),2.),0.);if(x>0.)y=vec3(.01+floor(mod(20.*(v.x+v.y),2.)));}vec3 t(vec2 v,vec2 x,bool y){vec2 r=(v-g[0].xy*.5)/g[0].y;r.x+=g[0].w;r*=3.5;r.y-=.9;vec3 i;if(length(r-x)<.05){r-=x;i=y?vec3(1,0,0):1.-vec3(.13,.76,.37);float w=max(8.*length(r-vec2(.04))+.9,0.);i*=1./w/w;}else{m=1;i=f(r,g[0].w,vec3(.13,.76,.37));m=0;if(i==vec3(0)){i=f(2.*r-3.*vec2(g[0].w-99.,-.1),g[0].w,vec3(.65,.31,.11));if(i==vec3(0)){i=f(4.*r-8.*vec2(g[0].w-99.,0),g[0].w,vec3(.65,.31,.11));if(i==vec3(0))i=vec3(.47,.71,1.);else i=mix(i,vec3(.47,.71,1.),.6);}else i=mix(i,vec3(.47,.71,1.),.3);}}return i;}void main(){vec2 x=gl_FragCoord.xy,i=vec2(r(g[1].xy),r(g[1].zw));i.x+=g[3].x;i*=3.5;vec2 f=vec2(r(g[2].xy),r(g[2].zw));vec3 m;bool y=mod(g[0].z,2.)>.9,w=mod(g[0].z/2.,2.)>.9,o=mod(g[0].z/4.,2.)>.9,c=mod(g[0].z/8.,2.)>.9;v=floor(g[0].z/16.);bool e=mod(g[3].z,2.)>.9,l=mod(g[3].z/2.,2.)>.9;int s=int(g[3].w);vec3 z=t(x+.5*vec2(-.75,.25),i,s<6),b=t(x+.5*vec2(-.25,-.75),i,s<6),a=t(x+.5*vec2(.25,.75),i,s<6),n=t(x+.5*vec2(.75,-.25),i,s<6);gl_FragColor=vec4(.25*(z+b+a+n),1);if(x.y<1.&&x.x<4.){f.y-=.01;i+=.05*f;if(r(i,g[0].w,m)){s=0;if(dot(m.xy,f)<0.)i+=m.xy*(m.z+.045),f=d(f,m.xy,1.,0.);}else{s++;if(s==6)e=false,l=false;if(!e&&c)e=true,l=true,f.y=-1.;if(!l&&w)l=true,f.x+=.5-.5*f.x;}gl_FragColor=vec4(0,0,((e?1.:0.)+(l?2.:0.))/255.,float(s)/255.);if(x.x<2.)i/=3.5,i.x-=g[0].w,gl_FragColor=vec4(d(i.x),d(i.y));else if(x.x<3.)gl_FragColor=vec4(d(f.x),d(f.y));}}',q=g.ch(35632),g.so(q,p),g.cS(q),g.ah(k,q),console.log(g.geL(q)),g.lg(k),g.vto(g.lg(k),2,5120,g.eet(g.ur(k)),g.bf(p=34962,g.cu()),g.ba(p,Uint8Array.of(28,28,28,128,128,28),p+82)),m=0,n=()=>(b=[128,1,128,1,128,1,128,1,255,1,192,1,128,1,128,1],e=new Uint8Array(16),$=l=d=f=0,m=prompt(s.innerText+'\nMap?(0-999)',m)|0,c=1),n(),o={},document.onkeydown=p=>o[p.keyCode]=1,document.onkeyup=p=>o[p.keyCode]=0,h=q=>(q|=0,q>9?q:'0'+q),setInterval(q=>(g.re(g.da(4,g.uM4(g.goa(k,'g'),g.vt(0,0,b[0],b[1]),b),3),0,4,1,6408,5121,e),b=Array.from(e),b[0]=a.width=innerWidth,b[1]=a.height=innerHeight,b[2]=o[37]|0+2*o[39]|0+4*o[38]|0+8*o[40]|0+16*m,b[12]=d,i=(b[8]/255+b[9]/255/255)*2-1,$+=i*.05/3.5+c,c=0,f+=(.3*i-f)/99,d=f+$,b[3]=d,b[13]=l++,$>20&&n(),s.innerText=`${h(l/3600)}:${h(l/60%60)}:${h(l/.6%100)}`),16)">html,body,canvas{font-family:monospace;margin:0}h1{color:#137;position:absolute;left:45%;top:0